google.maps.__gjsload__('drawing_impl', function(_){var K2=function(a,b){function c(f,g,h,k){var l=_.W("div",a);_.FJ(l,"left");l.style.lineHeight="0";g={title:g,Fe:h,eg:k,padding:[4],Bf:!0};h=_.W("span");h.style.display="inline-block";var m=f||"hand",q=G2[m],r=_.jC(d,h,new _.P(0,q),H2);r.style.position="relative";var v=_.UK(l,h,f,g);_.S.addListener(v,"active_changed",function(){var u=v.get("active")?I2[m]:q;_.kC(r,H2,new _.P(0,u))});v.bindTo("value",e,"drawingMode")}var d=_.Lm("drawing"),e=this;c(null,"\u505c\u6b62\u7ed8\u56fe",!0,!b.length);_.C(b,
function(f,g){var h=J2[f];h&&c(f,h,!1,g==b.length-1)})},L2=_.n(),M2=function(a,b,c){this.A=a;this.B=b;this.D=c},N2=function(a){if(!a.j){var b={};_.Jc(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.D());delete b.map;a.j=a.A.l(b)}},O2=function(a,b){a.j&&(a.l?(a.j.get("map")||a.j.bindTo("map",a),a.A.j(a.j,a.l,b)):a.A.j(a.j,b))},P2=function(a,b){O2(a,b);b=a.j;b.unbind("map");a.j=null;_.S.trigger(a,"overlaycomplete",{type:a.A.A(),overlay:b});_.S.trigger(a,a.A.m(),b);a.l=null;a.m=!1},Q2=_.n(),R2=function(a){this.l=
a;this.j=null},S2=function(a){if(!a.j){var b={};_.Jc(b,a.get("options"));delete b.map;a.j=new _.kf(b)}},T2=function(a,b,c,d){this.m=a;this.l=b;this.A=c;this.B=d+1E-6;this.j=null;this.H=new _.P(0,0);this.D=new _.P(0,0);this.F=new _.P(0,0)},U2=function(a,b){a.j.cc.getPath().push(b);a.j.Mb.set("anchors",[b])},X2=function(a,b){var c=V2(a,b);c?(a.m||2!=c.type||U2(a,c.latLng),W2(a)):U2(a,b)},V2=function(a,b){var c=a.j.cc.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");
e=a.B/(1<<e);var g=f.fromLatLngToPoint(b,a.H);b=b.lng();d=c.getAt(d-1);var h=new _.R(d.lat(),_.Lc(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.D);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.R(c.lat(),_.Lc(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.F);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},Z2=function(a){var b=a.get("options"),c=new _.T;c.setValues(b);var d=new _.rI(c,a.m);c={};_.Jc(c,b);c.strokeColor=
d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.A());delete c.path;delete c.map;var e=new _.qh(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.oI;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.m&&(f={},_.Jc(f,b),f.zIndex=c.zIndex,f.paths=new _.fe([e.getPath()]),delete f.map,f=new _.ph(f));a.j={cc:e,Oh:f,Mb:d};Y2(a)},W2=function(a){var b=a.j.cc;b.unbind("map");var c=a.j.Oh;a.j.Mb.unbind("map");
a.j.Mb.set("map",null);a.j=null;a.set("draggableCursor",a.l);if(b.getPath().getLength()){if(a.m){b.set("map",null);c.set("map",a.get("map"));var d={type:"polygon",overlay:c};_.S.trigger(a,"overlaycomplete",d);_.S.trigger(a,"polygoncomplete",c)}else d={type:"polyline",overlay:b},_.S.trigger(a,"overlaycomplete",d),_.S.trigger(a,"polylinecomplete",b);Y2(a)}else b.set("map",null)},Y2=function(a){a.set("enablePanning",!!a.j&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},$2=_.n(),a3=function(a,
b){if(a.lat()<b.lat()){var c=a.lat();var d=b.lat()}else c=b.lat(),d=a.lat();if(180>=_.zd(a.lng(),b.lng())){var e=a.lng();a=b.lng()}else e=b.lng(),a=a.lng();return _.Dd(c,e,d,a)},b3=function(){var a=0;return function(){return a++}},f3=function(){var a=this.l=c3(this);this.ja=d3(this);var b="url("+_.Km+"crosshair.cur)";_.om.m&&(b+=" 7 7");b+=", crosshair";var c=b3();this.B=6+(_.qm()?9:0);this.m={circle:new M2(new Q2,b,c),marker:new R2(b),polygon:new T2(!0,b,c,this.B),polyline:new T2(!1,b,c,this.B),
rectangle:new M2(new $2,b,c)};b=e3(this);for(var d in this.m)c=this.m[d],c.bindTo("map",this),c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.S.forward(c,"overlaycomplete",this),_.S.forward(c,d+"complete",this);this.m.polygon.bindTo("drawPolysWithDrag",this);this.m.polyline.bindTo("drawPolysWithDrag",this);this.j=null;this.va=[];this.A=this.D=null;this.J=0;this.ca=this.H=null;
this.F=this.K=void 0},c3=function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),c=new _.mI(b),d=!1;_.C(b,function(e){_.S.addListener(c,e,function(f,g){var h=f instanceof _.cn,k=h?f.ea:f;if("click"==e||"dblclick"==e||"mousemove"==e)h?("click"==e&&_.gn(f),"dblclick"==e&&_.gn(f),"mousemove"==e&&_.en(f)):_.Jd(f);if("mousewheel"!=e&&(!d||"mousemove"!=e)){if("mousemove"==e||"move"==e)a.H=e,a.ca=k,a.K=g;if(d||!a.get("panWhileDrawing"))"movestart"==e&&(d=!0),"moveend"==
e&&(d=!1),f=_.Qk(),"panbynow"==e?a.H&&g3(a,a.H,a.ca,f,a.K):g3(a,e,k,f,g)}})});return c},d3=function(a){var b=new _.ox(["map","drawingMode","pegmanDragging"],"active",function(c,d,e){return!!c&&!!d&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.l.bindTo("active",b);return b},e3=function(a){var b=new _.ox(["draggableCursor","panWhileDrawing"],"cursor",function(c,d){return d?null:c});b.bindTo("panWhileDrawing",a);a.l.bindTo("draggableCursor",b,"cursor");return b},g3=function(a,b,c,d,e){var f=a.get("map");
if(a.j){var g=f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(e=e||c,a.F&&e)){g=a.F.zb(e);f=_.pl(g,f.getProjection());e=new _.P(e.clientX,e.clientY);(g=(g=a.get("snappingCallback"))&&g(a.j.If(f)))&&(f=g);g=!1;if("click"==b){if(300>=d-a.J&&a.A&&_.Mc(a.A.x,e.x,a.B)&&_.Mc(a.A.y,e.y,a.B))return;a.A=e;a.J=d;g=a.j.ee(f)}else"dblclick"==b?g=a.j.yh():"mousemove"==b?g=a.j.uf(f):"movestart"==b?g=a.j.xf(f):"move"==b?g=a.j.vf(f):"moveend"==b&&(g=a.j.wf(f));g&&c&&_.Jd(c)}}},i3=function(a){var b=
this;this.U=new _.hg(function(){b.j&&(b.l.Bb(b.j),_.Yg(b.j),b.j=null,b.m.unbindAll(),b.m=null);b.l=b.get("layoutManager");if(b.l&&0!=b.get("drawingControl")){var d=b.get("drawingControlOptions")||{},e=d.drawingModes||h3,f=document.createElement("div");_.Yw(f);f.style.margin=_.V(5);_.Am(f,10);b.j=f;b.m=new K2(b.j,e);b.m.bindTo("drawingMode",b);b.l.addElement(b.j,d.position||1,!1,.25)}},0);var c=new f3;c.bindTo("map",a);c.bindTo("drawingMode",a);c.bindTo("panWhileDrawing",a);c.bindTo("markerOptions",
a);c.bindTo("polygonOptions",a);c.bindTo("polylineOptions",a);c.bindTo("rectangleOptions",a);c.bindTo("circleOptions",a);c.bindTo("drawPolysWithDrag",a);_.S.forward(c,"overlaycomplete",a);_.S.forward(c,"circlecomplete",a);_.S.forward(c,"markercomplete",a);_.S.forward(c,"polygoncomplete",a);_.S.forward(c,"polylinecomplete",a);_.S.forward(c,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",a);this.set("snappingCallback",
a.get("snappingCallback"));a.bindTo("snappingCallback",this);c.bindTo("snappingCallback",this)},j3=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.A(K2,_.T);
var J2={marker:"\u6dfb\u52a0\u6807\u8bb0",polygon:"\u7ed8\u5236\u5f62\u72b6",polyline:"\u7ed8\u5236\u7ebf\u6761",rectangle:"\u7ed8\u5236\u77e9\u5f62",circle:"\u7ed8\u5236\u5706\u5f62"},H2=new _.Q(16,16),I2={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},G2={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.A(L2,_.T);_.p=L2.prototype;_.p.ee=_.qa(!1);_.p.yh=_.qa(!1);_.p.uf=_.qa(!1);_.p.xf=_.qa(!1);_.p.vf=_.qa(!1);_.p.wf=_.qa(!1);_.A(M2,L2);_.p=M2.prototype;_.p.If=function(a){N2(this);O2(this,a);return{latLng:a,overlay:this.j}};_.p.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.B),this.set("draggingCursor","");else{var a=this.j;a&&(a.unbind("map"),a.set("map",null),this.j=null);this.l=null;this.m=!1}};_.p.ee=function(a){this.l?P2(this,a):(N2(this),this.l=a,O2(this,a),this.m=!0);return!1};_.p.uf=function(a){O2(this,a);return!1};
_.p.xf=function(a){if(this.m)return!1;this.set("draggingCursor",this.B);this.set("enablePanning",!0);N2(this);this.l=a;O2(this,a);return!0};_.p.vf=function(a){if(this.m)return!1;O2(this,a);return!0};_.p.wf=function(a){if(this.m)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);P2(this,a);return!0};Q2.prototype.l=function(a){return new _.nh(a)};Q2.prototype.j=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.zv(b,c,d&&d.radius));a.set("radius",d)};Q2.prototype.A=_.qa("circle");Q2.prototype.m=_.qa("circlecomplete");_.A(R2,L2);R2.prototype.If=function(a){S2(this);this.j.setPosition(a);return{latLng:a,overlay:this.j}};R2.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.l)};R2.prototype.ee=function(a){S2(this);this.j.setPosition(a);this.j.setMap(this.get("map"));_.S.trigger(this,"overlaycomplete",{type:"marker",overlay:this.j});_.S.trigger(this,"markercomplete",this.j);this.j=null;return!1};_.A(T2,L2);_.p=T2.prototype;_.p.If=function(a){this.j&&this.j.cc||Z2(this);return{latLng:a,overlay:this.j.Oh||this.j.cc}};_.p.active_changed=function(){this.get("active")?this.set("draggableCursor",this.l):this.j&&this.j.cc&&W2(this)};_.p.ee=function(a){if(!a)return!1;this.j?X2(this,a):(Z2(this),U2(this,a));return!1};_.p.yh=function(){this.j&&1<this.j.cc.getPath().getLength()&&W2(this);return!1};
_.p.uf=function(a){var b=a;this.j&&a&&(a=V2(this,a),this.set("draggableCursor",a?"pointer":this.l),a&&(b=a.latLng),this.j.Mb.set("freeVertexPosition",b));return!1};_.p.xf=function(a){return a?this.get("drawPolysWithDrag")?(this.j||Z2(this),this.j.cc.getPath().getLength()||U2(this,a),this.set("draggingCursor",this.l),!0):!1:!1};_.p.vf=function(a){return this.j&&this.get("drawPolysWithDrag")?(this.j.Mb.set("freeVertexPosition",a),!0):!1};
_.p.wf=function(a){return a?this.get("drawPolysWithDrag")?(this.j&&(X2(this,a),this.set("draggingCursor","")),this.j&&this.j.Mb.set("freeVertexPosition",null),!0):!1:!1};_.p.drawPolysWithDrag_changed=T2.prototype.panWhileDrawing_changed=function(){Y2(this)};$2.prototype.l=function(a){return new _.rh(a)};$2.prototype.j=function(a,b,c){a.set("bounds",a3(b,c||b))};$2.prototype.A=_.qa("rectangle");$2.prototype.m=_.qa("rectanglecomplete");_.A(f3,_.T);f3.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.ja,d=this.l;if(b){var e=b.__gm;e.j.then(function(f){a.F=f.sa});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.D=_.S.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.D&&(_.S.removeListener(this.D),this.D=null)};
f3.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.l;_.C(a,b.unbind,b);b=this.va;_.C(b,_.S.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.l;var c=this.get("map");_.qw(b,a,c.__gm)}};f3.prototype.drawingMode_changed=function(){this.j&&this.j.set("active",!1);this.l.set("panAtEdge",!1);var a=this.get("drawingMode");(this.j=this.m[a])&&this.j.set("active",!0)};_.A(i3,_.T);i3.prototype.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};i3.prototype.layoutManager_changed=function(){_.ig(this.U)};i3.prototype.drawingControl_changed=function(){_.ig(this.U)};i3.prototype.drawingControlOptions_changed=function(){_.ig(this.U)};
var h3=["marker","polyline","rectangle","circle","polygon"];_.Je("drawing_impl",{Ni:i3,tk:function(a){var b=new _.T,c=new _.ox(["dataDrawingMode"],"drawingManagerMode",j3);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.ox(["styleOrStylingFunction"],"style",function(g){return"function"===typeof g?g(new _.Ke):g});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.ox(["controls","controlPosition"],"drawingControlOptions",function(g,h){return{drawingModes:_.Nc(g,j3),position:h}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.ox(["controls"],
"drawingControl",function(g){return!!g});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.S.addListener(b,"overlaycomplete",function(g){g=g.overlay;var h=_.kI([g]),k=a.get("featureFactory");h=k?k(h):new _.Ke({geometry:h});a.add(h);g.set("map",null)});new i3(b);_.S.ma(a,"map_changed",
function(){var g=a.get("map");g&&_.Xm(g,"Le")})}});});
